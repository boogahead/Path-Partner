<?xml version="1.0" encoding="UTF-8" ?> <!-- 관통용  -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.pathpartner.user.repository.userDao">
  <resultMap type="userDto" id="user">
    <result column="uuid" property="uid"/>
    <result column="id" property="userId"/>
    <result column="nickname" property="userName"/>
    <result column="password" property="userPass"/>
    <result column="join_date" property="joinDate"/>
    <result column="user_type" property="userType"/>
    <result column="profile_img" property="profileImg"/>
    <result column="email" property="email"/>
  </resultMap>

  <insert id="createUser" parameterType="userDto">
    insert into user (uuid,id, nickname, password, user_type,join_date,email)
    values (UUID(),#{userId}, #{userName}, #{userPass}, #{userType},now(),#{email})
  </insert>

  <select id="selectMemberById" parameterType="String" resultMap="user">
    select uuid, id, nickname, password, join_date, user_type,email
    from user
    where id = #{userId}
  </select>

  <update id="updateMember" parameterType="userDto">
    update user
    set password=#{userPass},
        nickname=#{userName},
        user_roles=#{userType}
    where uuid = #{uid}
  </update>

  <delete id="deleteMember" parameterType="int">
    delete
    from user
    where uuid = #{uid}
  </delete>

  <select id="selectMemberByIdAndName" parameterType="userDto" resultMap="user">
    select uuid, id, nickname, password, join_date, user_type,email
    from user
    where id = #{userId}
      and nickname = #{userName}
  </select>

  <update id="updateMemberPassword" parameterType="userDto">
    update user
    set password = #{userPass}
    where uuid = #{uid}
  </update>
</mapper>