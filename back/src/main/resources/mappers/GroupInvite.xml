<?xml version="1.0" encoding="UTF-8" ?> <!-- 관통용  -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.pathpartner.travelgroup.repository.GroupInviteDao">

  <insert id="createGroupInvite" parameterType="GroupInviteDto">
    INSERT INTO group_invite (group_id, invite_to)
    VALUES (#{groupId}, #{inviteTo})
  </insert>

  <delete id="deleteGroupInvite" parameterType="GroupInviteDto">
    delete
    from group_invite
    where group_id = #{groupId}
      and invite_to = #{inviteTo}
  </delete>

  <select id="selectGroupInvite" parameterType="String" resultType="GroupInviteDto">
    select gi.group_id, g.group_name
    from group_invite as gi
    join travel_group as g
    on gi.group_id = g.group_id
    where invite_to = #{uuid}
  </select>

  <select id="selectAllPendingInvite" parameterType="String" resultType="GroupMemberDto">
    select group_id, u.uuid, u.email, u.nickname, u.profile_img
    from group_invite as gi
    join user as u
    on gi.invite_to = u.uuid
    where group_id = #{groupId}
  </select>
</mapper>